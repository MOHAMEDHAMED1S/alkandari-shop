# ุชุญุฏูุซ ุนุฑุถ ุงููุฆุงุช ุงููุฑูู | Categories Hierarchy Update

## ๐ ูุธุฑุฉ ุนุงูุฉ | Overview

ุชู ุชุญุฏูุซ ูุธุงู ุนุฑุถ ุงููุฆุงุช ููุฏุนู ุงูุนุฑุถ ุงููุฑูู (ุงูุขุจุงุก ูุงูุฃุจูุงุก) ุจุฏูุงู ูู ุนุฑุถ ุฌููุน ุงููุฆุงุช ูู ูุงุฆูุฉ ูุงุญุฏุฉ.

The categories display system has been updated to support hierarchical display (parent and child categories) instead of showing all categories in a single flat list.

---

## โ ุงูุชุบููุฑุงุช ุงููููุฐุฉ | Changes Implemented

### 1. Frontend - TypeScript/React

#### ุฃ. ุชุญุฏูุซ `api.ts`
**ุงููููุน:** `/front-end/src/lib/api.ts`

**ุงูุชุบููุฑุงุช:**
- โ ุชุญุฏูุซ `Category` interface ูุฅุถุงูุฉ ุงูุญููู ุงููุฑููุฉ:
  - `parent_id`: ุฑูู ุงููุฆุฉ ุงูุฃุจ
  - `children`: ูุงุฆูุฉ ุงููุฆุงุช ุงููุฑุนูุฉ
  - `is_active`: ุญุงูุฉ ุงููุฆุฉ
  - `sort_order`: ุชุฑุชูุจ ุงูุนุฑุถ

- โ ุชุญุฏูุซ `getCategories()` ูุฏุนู parameters:
  - `parents_only`: ูุฅุฑุฌุงุน ุงููุฆุงุช ุงูุฃุจ ููุท
  - `with_children`: ูุฅุฑุฌุงุน ุงููุฆุงุช ูุน ุงูุฃุจูุงุก

- โ ุฅุถุงูุฉ `getCategoryTree()`:
  - ูุธููุฉ ุฌุฏูุฏุฉ ูุฌูุจ ุงููุฆุงุช ุจุดูู ูุฑูู ูุงูู
  - ุชุณุชุฎุฏู endpoint `/categories/tree`

- โ ุฅุนุงุฏุฉ ุชุณููุฉ `getCategoryTree()` ุงูุฎุงุตุฉ ุจุงูู Admin ุฅูู `getAdminCategoryTree()`

```typescript
export interface Category {
  id: number;
  name: string;
  slug: string;
  description?: string;
  image?: string;
  products_count?: number;
  parent_id?: number | null;
  children?: Category[];
  is_active?: boolean;
  sort_order?: number;
}

export const getCategories = async (params?: { 
  parents_only?: boolean; 
  with_children?: boolean 
}) => {
  const response = await api.get<{ success: boolean; data: Category[] }>('/categories', { params });
  return response.data;
};

export const getCategoryTree = async () => {
  const response = await api.get<{ success: boolean; data: Category[] }>('/categories/tree');
  return response.data;
};
```

---

#### ุจ. ุชุญุฏูุซ ุตูุญุฉ `Categories.tsx`
**ุงููููุน:** `/front-end/src/pages/Categories.tsx`

**ุงูุชุบููุฑุงุช:**
- โ ุงุณุชุฎุฏุงู `getCategoryTree()` ุจุฏูุงู ูู `getCategories()`
- โ ุฅุถุงูุฉ state ูุชุชุจุน ุงููุฆุงุช ุงูููุชูุญุฉ: `expandedCategories`
- โ ุฅุถุงูุฉ ุฏุงูุฉ `toggleCategory()` ููุชุญ/ุฅุบูุงู ุงููุฆุงุช ุงููุฑุนูุฉ
- โ ุฅุถุงูุฉ ุฏุงูุฉ `renderCategory()` ุงูุนูุฏูุฉ ูุนุฑุถ ุงููุฆุงุช ุจุดูู ูุฑูู
- โ ุชุตููู ุฌุฏูุฏ ูุธูุฑ:
  - ุฃููููุงุช Folder/FolderOpen ูููุฆุงุช ุงูุชู ููุง ุฃุจูุงุก
  - ุฒุฑ ูุฅุธูุงุฑ/ุฅุฎูุงุก ุงููุฆุงุช ุงููุฑุนูุฉ
  - ุนุฏุฏ ุงููุฆุงุช ุงููุฑุนูุฉ
  - ุนุฏุฏ ุงูููุชุฌุงุช ูู ูู ูุฆุฉ

**ุงูููุฒุงุช ุงูุฌุฏูุฏุฉ:**
- ๐ ุนุฑุถ ุงููุฆุงุช ุงูุฃุจ ูุน ุฅููุงููุฉ ุชูุณูุนูุง
- ๐ฝ ุฃุฒุฑุงุฑ ููุชุญ/ุฅุบูุงู ุงููุฆุงุช ุงููุฑุนูุฉ
- ๐จ ุชุตููู ุฃููู ูุน animations
- ๐ ุนุฑุถ ุนุฏุฏ ุงูููุชุฌุงุช ูุงููุฆุงุช ุงููุฑุนูุฉ
- ๐ ุฏุนู RTL/LTR ูุงูู

---

#### ุฌ. ุชุญุฏูุซ ุตูุญุฉ `Home.tsx`
**ุงููููุน:** `/front-end/src/pages/Home.tsx`

**ุงูุชุบููุฑุงุช:**
- โ ุงุณุชุฎุฏุงู `getCategories({ parents_only: true })` 
- โ ุนุฑุถ ุงููุฆุงุช ุงูุฃุจ ููุท ูู ุงูุตูุญุฉ ุงูุฑุฆูุณูุฉ

**ุงูุณุจุจ:** ูุชุฌูุจ ุงุฒุฏุญุงู ุงูุตูุญุฉ ุงูุฑุฆูุณูุฉ ุจุฌููุน ุงููุฆุงุช

---

#### ุฏ. ุชุญุฏูุซ ุตูุญุฉ `Products.tsx`
**ุงููููุน:** `/front-end/src/pages/Products.tsx`

**ุงูุชุบููุฑุงุช:**
- โ ุงุณุชุฎุฏุงู `getCategories({ parents_only: true })` ูู ูุงุฆูุฉ ุงูุชุตููุฉ
- โ ุนุฑุถ ุงููุฆุงุช ุงูุฃุจ ููุท ูู ุงููุงุฆูุฉ ุงูููุณุฏูุฉ

**ุงูุณุจุจ:** ุชุจุณูุท ูุงุฆูุฉ ุงูุชุตููุฉ

---

#### ูู. ุชุญุฏูุซ ุงูุชุฑุฌูุงุช
**ุงููููุน:** `/front-end/src/i18n/locales/`

**ููู `ar.json`:**
```json
"categories": {
  "showSubcategories": "ุนุฑุถ ุงููุฆุงุช ุงููุฑุนูุฉ",
  "hideSubcategories": "ุฅุฎูุงุก ุงููุฆุงุช ุงููุฑุนูุฉ",
  "noCategories": "ูุง ุชูุฌุฏ ูุฆุงุช ูุชุงุญุฉ"
}
```

**ููู `en.json`:**
```json
"categories": {
  "showSubcategories": "Show Subcategories",
  "hideSubcategories": "Hide Subcategories",
  "noCategories": "No categories available"
}
```

---

### 2. Backend - Laravel/PHP

**ุงููููุน:** `/back-end/app/Http/Controllers/Api/CategoryController.php`

**ุงููุถุน:** โ ุฌุงูุฒ ุจุงููุนู (ูุง ูุญุชุงุฌ ุชุญุฏูุซุงุช)

**ุงูู Endpoints ุงููุชุงุญุฉ:**

#### ุฃ. `/api/v1/categories`
- **Method:** GET
- **Parameters:**
  - `parents_only` (boolean): ุฅุฑุฌุงุน ุงููุฆุงุช ุงูุฃุจ ููุท
  - `with_children` (boolean): ุฅุฑุฌุงุน ุงููุฆุงุช ูุน ุงูุฃุจูุงุก
- **ุงูุงุณุชุฎุฏุงู:** ููุญุตูู ุนูู ูุงุฆูุฉ ุงููุฆุงุช ูุน ุชุตููุฉ

#### ุจ. `/api/v1/categories/tree`
- **Method:** GET
- **ุงูุงุณุชุฎุฏุงู:** ููุญุตูู ุนูู ุดุฌุฑุฉ ุงููุฆุงุช ุงููุงููุฉ ุจุดูู ูุฑูู
- **ุงูุฅุฑุฌุงุน:** 
  - ุงููุฆุงุช ุงูุฃุจ ููุท (`whereNull('parent_id')`)
  - ูุน ุงูุฃุจูุงุก ุงูููุนููู (`with('children')`)
  - ูุฑุชุจุฉ ุญุณุจ `sort_order` ู `name`

---

## ๐ง ููููุฉ ุงูุงุณุชุฎุฏุงู | How to Use

### ูููุณุชุฎุฏู ุงูุนุงุฏู:

1. ุงูุชูู ุฅูู ุตูุญุฉ ุงููุฆุงุช: `/categories`
2. ุณุชุฑู ุงููุฆุงุช ุงูุฃุจ ููุท ุจุดูู ุงูุชุฑุงุถู
3. ุงุถุบุท ุนูู ุฒุฑ "ุนุฑุถ ุงููุฆุงุช ุงููุฑุนูุฉ" ูุฑุคูุฉ ุงููุฆุงุช ุงููุฑุนูุฉ
4. ุงุถุบุท ุนูู ุฃู ูุฆุฉ ููุงูุชูุงู ุฅูู ุตูุญุฉ ุงูููุชุฌุงุช

### ูููุทูุฑ:

```typescript
// ุฌูุจ ุงููุฆุงุช ุงูุฃุจ ููุท
const categories = await getCategories({ parents_only: true });

// ุฌูุจ ุงููุฆุงุช ูุน ุงูุฃุจูุงุก
const categoriesWithChildren = await getCategories({ 
  parents_only: true, 
  with_children: true 
});

// ุฌูุจ ุดุฌุฑุฉ ุงููุฆุงุช ุงููุงููุฉ
const categoryTree = await getCategoryTree();
```

---

## ๐ ุจููุฉ ุงูุจูุงูุงุช | Data Structure

### ูุงุนุฏุฉ ุงูุจูุงูุงุช:
```
categories
โโโ id (PK)
โโโ name
โโโ slug
โโโ description
โโโ image
โโโ parent_id (FK โ categories.id)
โโโ is_active
โโโ sort_order
โโโ timestamps
```

### ุงูุนูุงูุงุช:
- **parent()**: BelongsTo โ Category
- **children()**: HasMany โ Category
- **products()**: HasMany โ Product

---

## ๐จ ุงูุชุตููู | Design

### ุงููุฆุงุช ุงูุฃุจ:
- ุญุฌู ุฃูุจุฑ
- ุตูุฑุฉ 28ร28 (7rem)
- ุฃููููุฉ Folder/FolderOpen
- ุฒุฑ ููุชูุณูุน/ุงูุทู

### ุงููุฆุงุช ุงููุฑุนูุฉ:
- ุญุฌู ุฃุตุบุฑ ููููุงู
- ุตูุฑุฉ 20ร20 (5rem)
- ูุณุงูุฉ ุจุงุฏุฆุฉ (margin) ูู ุงููููู/ุงููุณุงุฑ
- ุชุธูุฑ/ุชุฎุชูู ุนูุฏ ุงูุถุบุท ุนูู ุงูุฒุฑ

---

## โจ ุงูููุฒุงุช | Features

โ **ุนุฑุถ ูุฑูู ูููุฆุงุช**
- ุงููุฆุงุช ุงูุฃุจ ูุงูุฃุจูุงุก ูููุตูุฉ
- ุชูุณูุน/ุทู ุงููุฆุงุช ุงููุฑุนูุฉ
  
โ **ุชุตููู ุฃููู**
- Animations ุณูุณุฉ
- Hover effects
- Responsive design
  
โ **ุฏุนู RTL/LTR**
- ูุนูู ุจุดูู ูุซุงูู ูุน ุงูุนุฑุจูุฉ ูุงูุฅูุฌููุฒูุฉ
  
โ **ูุนูููุงุช ุดุงููุฉ**
- ุนุฏุฏ ุงูููุชุฌุงุช
- ุนุฏุฏ ุงููุฆุงุช ุงููุฑุนูุฉ
- ูุตู ุงููุฆุฉ
  
โ **ุฃุฏุงุก ูุญุณูู**
- Lazy loading ููุตูุฑ
- ุงุณุชุฎุฏุงู React state ุจููุงุกุฉ

---

## ๐งช ุงูุงุฎุชุจุงุฑ | Testing

### ุงุฎุชุจุงุฑ Frontend:
```bash
cd front-end
npm run dev
```

ุซู:
1. ุงูุชูู ุฅูู `/categories`
2. ุชุญูู ูู ุนุฑุถ ุงููุฆุงุช ุงูุฃุจ
3. ุงุถุบุท ุนูู "ุนุฑุถ ุงููุฆุงุช ุงููุฑุนูุฉ"
4. ุชุญูู ูู ุธููุฑ ุงููุฆุงุช ุงููุฑุนูุฉ
5. ุงุถุบุท ุนูู "ุฅุฎูุงุก ุงููุฆุงุช ุงููุฑุนูุฉ"
6. ุชุญูู ูู ุงุฎุชูุงุก ุงููุฆุงุช ุงููุฑุนูุฉ

### ุงุฎุชุจุงุฑ Backend:
```bash
# ุงุฎุชุจุงุฑ endpoint ุงููุฆุงุช ุงูุนุงุฏู
curl http://back-end.test/api/v1/categories

# ุงุฎุชุจุงุฑ ุงููุฆุงุช ุงูุฃุจ ููุท
curl "http://back-end.test/api/v1/categories?parents_only=true"

# ุงุฎุชุจุงุฑ ุดุฌุฑุฉ ุงููุฆุงุช
curl http://back-end.test/api/v1/categories/tree
```

---

## ๐ ููุงุญุธุงุช | Notes

1. **ุงูุฃุฏุงุก:**
   - ุงุณุชุฎุฏุงู `getCategoryTree()` ูุฌูุจ ุฌููุน ุงูุจูุงูุงุช ุฏูุนุฉ ูุงุญุฏุฉ
   - ุฃูุถู ููุฃุฏุงุก ูู ุนูู ุทูุจุงุช ูุชุนุฏุฏุฉ

2. **ุงูุตูุงูุฉ:**
   - ูููู ุงูุชุญูู ูู ุนูู ุงูุดุฌุฑุฉ ูู ุงูู Backend
   - ุญุงููุงู ูุฏุนู ูุณุชูููู ููุท (ุฃุจ ูุงุจู)

3. **ุงูุชูุณุน ุงููุณุชูุจูู:**
   - ูููู ุฅุถุงูุฉ ุฏุนู ููุณุชููุงุช ุฃุนูู (ุฃุญูุงุฏ)
   - ูููู ุฅุถุงูุฉ drag & drop ูุฅุนุงุฏุฉ ุชุฑุชูุจ ุงููุฆุงุช

---

## โ ุงููููุงุช ุงููุญุฏุซุฉ | Updated Files

```
front-end/
โโโ src/
โ   โโโ lib/
โ   โ   โโโ api.ts โ
โ   โโโ pages/
โ   โ   โโโ Categories.tsx โ (ุชุญุฏูุซ ูุงูู)
โ   โ   โโโ Home.tsx โ
โ   โ   โโโ Products.tsx โ
โ   โโโ i18n/
โ       โโโ locales/
โ           โโโ ar.json โ
โ           โโโ en.json โ
```

**Backend:** ูุง ูุญุชุงุฌ ุชุญุฏูุซุงุช โ

---

## ๐ฏ ุงููุชูุฌุฉ | Result

ุงูุขูุ ุตูุญุฉ ุงููุฆุงุช ุชุนุฑุถ:
- โ ุงููุฆุงุช ุงูุฃุจ ุจุดูู ุจุงุฑุฒ
- โ ุฅููุงููุฉ ูุชุญ/ุฅุบูุงู ุงููุฆุงุช ุงููุฑุนูุฉ
- โ ุชุตููู ุฃููู ูุณูุณ
- โ ูุนูููุงุช ุดุงููุฉ ุนู ูู ูุฆุฉ
- โ ุฏุนู ูุงูู ููุบุฉ ุงูุนุฑุจูุฉ ูุงูุฅูุฌููุฒูุฉ
- โ responsive ุนูู ุฌููุน ุงูุฃุฌูุฒุฉ

---

## ๐ ุงูุฏุนู | Support

ุฅุฐุง ูุงุฌูุช ุฃู ูุดููุฉุ ูุฑุฌู ุงูุชุญูู ูู:
1. ุงูู Backend ูุนูู ุนูู `http://back-end.test/api/v1/`
2. ุงููุฆุงุช ูู ูุงุนุฏุฉ ุงูุจูุงูุงุช ููุง `parent_id` ุตุญูุญ
3. ุงููุฆุงุช `is_active = true`

---

**ุชุงุฑูุฎ ุงูุชุญุฏูุซ:** ุฃูุชูุจุฑ 2025
**ุงูุฅุตุฏุงุฑ:** 2.0

