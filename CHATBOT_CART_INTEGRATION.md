# ุชูุงูู ุงูุณูุฉ ูุน ุงูุดุงุช ุจูุช - Cart Integration

## โ ุชู ุฅุตูุงุญ ุฒุฑ "ุฃุถู ููุณูุฉ"

ุชู ุชูุนูู ูุธููุฉ "ุฃุถู ููุณูุฉ" ูู ุงูููุชุฌุงุช ุงูููุชุฑุญุฉ ูู ุงูุดุงุช ุจูุช!

---

## ๐ง ุงูุชุญุฏูุซุงุช

### 1. ููู ProductRecommendations.tsx

ุชู ุฅุถุงูุฉ:
```tsx
import { useCart } from '../../contexts/CartContext';
import { Product } from '../../lib/api';
import { toast } from 'sonner';
```

### 2. ูุธููุฉ handleAddToCart

```tsx
const handleAddToCart = (product: RecommendedProduct, e: React.MouseEvent) => {
  e.stopPropagation();
  
  // ุชุญููู RecommendedProduct ุฅูู Product format
  const productForCart: Product = {
    id: product.id,
    title: product.name || product.slug.replace(/-/g, ' '),
    slug: product.slug,
    price: product.price,
    currency: 'KWD',
    is_available: true,
    images: product.image ? [product.image] : [],
    // ... ุจุงูู ุงูุญููู
  };
  
  addToCart(productForCart, 1);
  toast.success('ุชู ุฅุถุงูุฉ ุงูููุชุฌ ููุณูุฉ ุจูุฌุงุญ');
};
```

---

## ๐ฏ ููู ูุนููุ

### ุงูุฎุทูุงุช:

1. **ุงููุณุชุฎุฏู ูุถุบุท ุนูู ุฒุฑ "ุฃุถู ููุณูุฉ"** ูู ุงูููุชุฌ ุงูููุชุฑุญ
2. **ูุชู ุชุญููู ุงูุจูุงูุงุช** ูู `RecommendedProduct` ุฅูู `Product` format
3. **ุงูุฅุถุงูุฉ ููุณูุฉ** ุจุงุณุชุฎุฏุงู `addToCart()` ูู `CartContext`
4. **ุฅุธูุงุฑ ุฅุดุนุงุฑ** ุจูุฌุงุญ ุงูุฅุถุงูุฉ
5. **ุงูุญูุธ ูู localStorage** ุชููุงุฆูุงู

---

## ๐ ุงูุจูุงูุงุช ุงููุทููุจุฉ ูู API

### RecommendedProduct ูู Backend:

```json
{
  "id": 1,
  "name": "ุตุงุจูู ุงููุงููุฏุฑ",
  "slug": "lavender-soap",
  "price": "25.500",
  "image": "https://example.com/image.jpg",
  "url": "https://expo-alkandari.com/product/lavender-soap"
}
```

### ุชุญููููุง ุฅูู Product format:

```typescript
{
  id: 1,
  title: "ุตุงุจูู ุงููุงููุฏุฑ",
  slug: "lavender-soap",
  price: "25.500",
  currency: "KWD",
  is_available: true,
  images: ["https://example.com/image.jpg"],
  // ุญููู ุฅุถุงููุฉ ุจููู ุงูุชุฑุงุถูุฉ
}
```

---

## ๐ ุงูุชูุงูู

### ูุน ูุธุงู ุงูุณูุฉ ุงูููุฌูุฏ:

- โ ูุณุชุฎุฏู ููุณ `CartContext`
- โ ููุณ ูุธููุฉ `addToCart()`
- โ ููุณ `localStorage` ููุญูุธ
- โ ููุณ ุทุฑููุฉ ุนุฑุถ ุงูุฅุดุนุงุฑุงุช

### ูุน ุงูุตูุญุงุช ุงูุฃุฎุฑู:

- โ ProductCard
- โ ProductDetail
- โ Cart page
- โ Checkout

---

## ๐จ ุงูุชุฌุฑุจุฉ

### ุนูุฏ ุงูููุฑ ุนูู "ุฃุถู ููุณูุฉ":

1. **Feedback ููุฑู** - ุงูุฒุฑ ูุชูุงุนู
2. **Toast notification** - ุฅุดุนุงุฑ ุจูุฌุงุญ ุงูุฅุถุงูุฉ
3. **ุชุญุฏูุซ ุงูุณูุฉ** - ุงูุนุฏุฏ ูุชุญุฏุซ ูู ุงูู header
4. **ุญูุธ ุชููุงุฆู** - ูู localStorage

---

## โ๏ธ ููุงุญุธุงุช ูููุฉ

### 1. ุงูุจูุงูุงุช ูู Backend

ุชุฃูุฏ ุฃู ุงูู API ูุฑุฌุน:
- โ `id` - ุฑูู ุงูููุชุฌ
- โ `name` - ุงุณู ุงูููุชุฌ (ูููู ุฃู ูููู null)
- โ `slug` - ููุฑุงุจุท
- โ `price` - ุงูุณุนุฑ ูู string
- โ `image` - ุตูุฑุฉ ุงูููุชุฌ (ูููู ุฃู ุชููู null)
- โ `url` - ุฑุงุจุท ุตูุญุฉ ุงูููุชุฌ

### 2. ุงูุชุญููู ุฅูู Product

```typescript
// ุฅุฐุง ูุงู name = nullุ ูุณุชุฎุฏู slug
title: product.name || product.slug.replace(/-/g, ' ')

// ุฅุฐุง ูุงูุช image = nullุ ูุณุชุฎุฏู array ูุงุฑุบ
images: product.image ? [product.image] : []
```

### 3. ุงูุญููู ุงูุงูุชุฑุงุถูุฉ

ุงูุจูุงูุงุช ุงูุชู ูุง ูุญุชุงุฌูุง ููุฑุงู ุชูููุฃ ุจููู ุงูุชุฑุงุถูุฉ:
```typescript
description: '',
short_description: '',
category_id: 0,
stock_quantity: 1,
// ุฅูุฎ...
```

---

## ๐ ุงุฎุชุจุงุฑ ุงููุธููุฉ

### ุฎุทูุงุช ุงูุงุฎุชุจุงุฑ:

1. **ุงูุชุญ ุงูุดุงุช ุจูุช**
2. **ุงุณุฃู ุนู ููุชุฌ** (ูุซูุงู: "ุฃุฑูุฏ ุตุงุจูู ููุจุดุฑุฉ ุงูุฌุงูุฉ")
3. **ุงูุชุธุฑ ุงูููุชุฌุงุช ุงูููุชุฑุญุฉ**
4. **ุงุถุบุท "ุฃุถู ููุณูุฉ"**
5. **ุชุญูู ูู:**
   - โ ุธููุฑ ุงูุฅุดุนุงุฑ
   - โ ุชุญุฏูุซ ุนุฏุฏ ุงูููุชุฌุงุช ูู ุงูู header
   - โ ุงูููุชุฌ ููุฌูุฏ ูู ุตูุญุฉ ุงูุณูุฉ

---

## ๐ ุญู ุงููุดุงูู

### ุงููุดููุฉ: ุงูุฒุฑ ูุง ูุนูู

**ุงูุฃุณุจุงุจ ุงููุญุชููุฉ:**
1. CartContext ุบูุฑ ูุชููุฑ
2. ุงูุจูุงูุงุช ูู API ุบูุฑ ูุงููุฉ
3. ุฎุทุฃ ูู ุงูุชุญููู

**ุงูุญู:**
1. ุชุญูู ูู Console ููุฃุฎุทุงุก
2. ุงูุญุต Network tab ููู API response
3. ุชุฃูุฏ ูู ูุฌูุฏ CartProvider ูู App

### ุงููุดููุฉ: ูุง ูุธูุฑ ุฅุดุนุงุฑ

**ุงูุญู:**
1. ุชุญูู ูู ุงุณุชูุฑุงุฏ `toast` ูู `sonner`
2. ุชุฃูุฏ ูู ูุฌูุฏ `Toaster` component ูู App
3. ุงูุญุต Console ููุฃุฎุทุงุก

### ุงููุดููุฉ: ุงูููุชุฌ ูุง ูุธูุฑ ูู ุงูุณูุฉ

**ุงูุญู:**
1. ุงูุญุต localStorage (key: 'cart')
2. ุชุญูู ูู `addToCart` function
3. ุชุฃูุฏ ูู ุตุญุฉ ุงูุจูุงูุงุช ุงููุญููุฉ

---

## ๐ ูุซุงู ูุงูู

### Backend API Response:

```json
{
  "success": true,
  "data": {
    "message": {
      "id": 10,
      "role": "assistant",
      "content": "ุฑุฏ ุงูุดุงุช ุจูุช...",
      "metadata": {
        "recommended_products": [
          {
            "id": 1,
            "name": "ุตุงุจูู ููุชุงููู C",
            "slug": "vitamin-c-soap",
            "price": "25.500",
            "image": "https://example.com/vitamin-c.jpg",
            "url": "https://expo-alkandari.com/product/vitamin-c-soap"
          },
          {
            "id": 2,
            "name": null,
            "slug": "lavender-moisturizer",
            "price": "35.750",
            "image": null,
            "url": "https://expo-alkandari.com/product/lavender-moisturizer"
          }
        ]
      },
      "sent_at": "2025-10-21T18:39:17.000000Z"
    }
  }
}
```

### ูุง ูุญุฏุซ ุนูุฏ ุงูููุฑ:

```
ุงููุณุชุฎุฏู ูุถุบุท "ุฃุถู ููุณูุฉ" ููููุชุฌ ุงูุฃูู
    โ
handleAddToCart(product)
    โ
ุชุญููู ุงูุจูุงูุงุช:
{
  id: 1,
  title: "ุตุงุจูู ููุชุงููู C",
  price: "25.500",
  images: ["https://example.com/vitamin-c.jpg"],
  ...
}
    โ
addToCart(productForCart, 1)
    โ
ุงูุณูุฉ ุชุชุญุฏุซ ูู CartContext
    โ
localStorage.setItem('cart', ...)
    โ
toast.success("ุชู ุฅุถุงูุฉ ุงูููุชุฌ ููุณูุฉ ุจูุฌุงุญ")
    โ
โ ุชู!
```

---

## ๐ ุงูููุฒุงุช

### ูุง ุชู ุฅุถุงูุชู:

- โ **ุฅุถุงูุฉ ููุณูุฉ** - ุชุนูู ุจุดูู ูุงูู
- โ **ุฅุดุนุงุฑุงุช** - toast notifications ุฌูููุฉ
- โ **ุชูุงูู** - ูุน ูุธุงู ุงูุณูุฉ ุงูููุฌูุฏ
- โ **ุชุญููู ุงูุจูุงูุงุช** - ุชููุงุฆู ูู API format
- โ **ูุนุงูุฌุฉ null** - ููุญููู ุงููุงุฑุบุฉ
- โ **ุญูุธ ุชููุงุฆู** - ูู localStorage

---

## ๐ ุชุญุณููุงุช ูุณุชูุจููุฉ

### ูููู ุฅุถุงูุฉ:

1. **ุฌูุจ ุงูุจูุงูุงุช ุงููุงููุฉ**
   - ุงุณุชุฏุนุงุก API ููุญุตูู ุนูู ุจูุงูุงุช ุงูููุชุฌ ุงููุงููุฉ
   - ุจุฏูุงู ูู ุงุณุชุฎุฏุงู ุงูุจูุงูุงุช ุงููุญุฏูุฏุฉ

2. **Facebook Pixel tracking**
   - ุชุชุจุน ุฅุถุงูุฉ ุงูููุชุฌุงุช ููุณูุฉ
   - ูุซู ProductCard

3. **Animation**
   - ุญุฑูุฉ ุนูุฏ ุฅุถุงูุฉ ุงูููุชุฌ
   - ุชุฃุซูุฑ ุนูู ุงูุฒุฑ

4. **ุงููููุฉ**
   - ุฅููุงููุฉ ุงุฎุชูุงุฑ ุงููููุฉ
   - ูุจู ุงูุฅุถุงูุฉ ููุณูุฉ

---

## โ ูุงุฆูุฉ ุงูุชุญูู

- [x] ุงุณุชูุฑุงุฏ CartContext
- [x] ุงุณุชูุฑุงุฏ Product type
- [x] ุงุณุชูุฑุงุฏ toast
- [x] ุชุญููู RecommendedProduct ุฅูู Product
- [x] ุงุณุชุฏุนุงุก addToCart
- [x] ุฅุธูุงุฑ toast notification
- [x] ุงุฎุชุจุงุฑ ุงููุธููุฉ
- [x] ุงูุชุญูู ูู ุนุฏู ูุฌูุฏ ุฃุฎุทุงุก

---

**ุชุงุฑูุฎ ุงูุชุญุฏูุซ:** 21 ุฃูุชูุจุฑ 2025

**ุงูุญุงูุฉ:** โ ูุนูู ุจุดูู ูุงูู

**ุงูุฅุตุฏุงุฑ:** 3.1

